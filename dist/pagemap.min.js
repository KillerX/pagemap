/*! pagemap v0.4.0 - https://larsjung.de/pagemap/ */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.pagemap=e():t.pagemap=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(e){"use strict";var o=n(1),r=e.window,i=r.document,c=i.querySelector("body"),u=function(t){return"rgba(0,0,0,"+t/100+")"},f={viewport:null,content:null,styles:{"header,footer,section,article":u(8),"h1,a":u(10),"h2,h3,h4":u(8)},back:u(2),view:u(5),drag:u(10),interval:null},l=function(t,e,n,o){return n.split(/\s+/).forEach(function(n){return t[e](n,o)})},s=function(t,e,n){return l(t,"addEventListener",e,n)},a=function(t,e,n){return l(t,"removeEventListener",e,n)};t.exports=function(t,e){var n=Object.assign({},f,e),u=t.getContext("2d"),l=function(){var e=t.clientWidth,n=t.clientHeight;return function(t,o){return Math.min(e/t,n/o)}}(),p=function(e,n){t.width=e,t.height=n,t.style.width=e+"px",t.style.height=n+"px"},h=n.viewport,d=n.content,v=function(t){return Array.from((h||i).querySelectorAll(t))},y=!1,g=void 0,w=void 0,x=void 0,m=void 0,b=void 0,T=function(t,e){e&&(u.beginPath(),u.rect(t.x,t.y,t.w,t.h),u.fillStyle=e,u.fill())},E=function(t){Object.keys(t).forEach(function(e){var n=t[e];v(e).forEach(function(t){T(o.ofElement(t).relativeTo(g),n)})})},O=function(){g=h?o.ofContent(d):o.ofDocument(),w=h?o.ofViewport(h):o.ofWindow(),x=l(g.w,g.h),p(g.w*x,g.h*x),u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,t.width,t.height),u.scale(x,x),T(g.relativeTo(g),n.back),E(n.styles),T(w.relativeTo(g),y?n.drag:n.view)},W=function(e){e.preventDefault();var n=o.ofViewport(t),i=(e.pageX-n.x)/x-w.w*m,c=(e.pageY-n.y)/x-w.h*b;h?(h.scrollLeft=i,h.scrollTop=c):r.scrollTo(i,c),O()},j=function e(n){y=!1,t.style.cursor="pointer",c.style.cursor="auto",a(r,"mousemove",W),a(r,"mouseup",e),W(n)},H=function(e){y=!0;var n=o.ofViewport(t),i=w.relativeTo(g);m=((e.pageX-n.x)/x-i.x)/i.w,b=((e.pageY-n.y)/x-i.y)/i.h,(m<0||m>1||b<0||b>1)&&(m=.5,b=.5),t.style.cursor="crosshair",c.style.cursor="crosshair",s(r,"mousemove",W),s(r,"mouseup",j),W(e)},L=function(){t.style.cursor="pointer",s(t,"mousedown",H),s(h||r,"load resize scroll",O),n.interval>0&&setInterval(function(){return O()},n.interval),O()};return L(),{redraw:O}}}).call(e,function(){return this}())},function(t,e){(function(e){"use strict";var n=e.window,o=n.document.documentElement,r=t.exports=function(t,e,n,o){return Object.assign(Object.create(r.prototype),{x:t,y:e,w:n,h:o})};r.prototype={constructor:r,relativeTo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};return r(this.x-t.x,this.y-t.y,this.w,this.h)}},r.ofDocument=function(){return r(0,0,o.scrollWidth,o.scrollHeight)},r.ofWindow=function(){return r(n.pageXOffset,n.pageYOffset,o.clientWidth,o.clientHeight)};var i=function(t){var e=t.getBoundingClientRect();return{x:e.left+n.pageXOffset,y:e.top+n.pageYOffset}};r.ofElement=function(t){var e=i(t),n=e.x,o=e.y;return r(n,o,t.offsetWidth,t.offsetHeight)},r.ofViewport=function(t){var e=i(t),n=e.x,o=e.y;return r(n+t.clientLeft,o+t.clientTop,t.clientWidth,t.clientHeight)},r.ofContent=function(t){var e=i(t),n=e.x,o=e.y;return r(n+t.clientLeft-t.scrollLeft,o+t.clientTop-t.scrollTop,t.scrollWidth,t.scrollHeight)}}).call(e,function(){return this}())}])});